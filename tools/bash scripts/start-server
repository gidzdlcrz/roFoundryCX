#!/bin/bash

cd trunk || exit 1

# ASCII Logo
cat << "EOF"
            _____                     _            
  _ __ ___ |  ___|__  _   _ _ __   __| |_ __ _   _ 
 | '__/ _ \| |_ / _ \| | | | '_ \ / _` | '__| | | |
 | | | (_) |  _| (_) | |_| | | | | (_| | |  | |_| |
 |_|  \___/|_|  \___/ \__,_|_| |_|\__,_|_|   \__, |
                                             |___/ 
                         Copyright roFoundry
EOF

echo ""
echo "=========================================="
echo " Powered by roFoundry"
echo "=========================================="
sleep 2

echo "Server is Starting..."
sleep 1

# Start login-server
screen -dmS log bash -c './login-server; exec bash'
echo "Started ./login-server in 'log' screen."
sleep 1

# Start char-server
screen -dmS char bash -c './char-server; exec bash'
echo "Started ./char-server in 'char' screen."
sleep 1

# Start web-server
screen -dmS web bash -c './web-server; exec bash'
echo "Started ./web-server in 'web' screen."
sleep 1

# Ask user about GDB for map-server
read -rp "Run map-server with GDB? (manual 'r') [y/N]: " USE_GDB

case "$USE_GDB" in
    [yY]|[yY][eE][sS])
        echo "Starting map-server in GDB (manual run)..."
        screen -S map bash -c 'gdb ./map-server; exec bash'
        ;;
    *)
        echo "Starting map-server normally..."
        screen -S map bash -c './map-server; exec bash'
        ;;
esac
